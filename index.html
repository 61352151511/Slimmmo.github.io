<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/bonusstyle.css">
    <script src="js/angular.min.js"></script>
    <script src="js/angular-animate.min.js"></script>
    <script src="js/ui-bootstrap-custom-tpls-0.13.3.min.js"></script>
    <script src="js/main.js"></script>
    <title>AdVenture Capitalist Calculator</title>
    <base href="/">
  </head>
  <body data-ng-app="advApp">
    <div class="container-fluid col-xs-12" data-ng-controller="advController">
      <div class="page-header">
        <h1>AdVenture Capitalist Calculator </h1> v0.1<a class="pull-right" href="https://github.com/Slimmmo/Slimmmo.github.io">Feedback</a>
      </div>
      <div>
        Load a saved state: <input type="file" id="fileInput"><button type="button" class="btn btn-primary pull-right" data-ng-click="export()">Save State</button>
      </div>
      <ul class="nav nav-tabs nav-justified">
        <li role="presentation" data-ng-class="{active: !isCompare() && isEarth()}"><a data-ng-click="setEarth()">Earth</a></li>
        <li role="presentation" data-ng-class="{active: !isCompare() && !isEarth()}"><a data-ng-click="setMoon()">Moon</a></li>
      </ul>
      <div data-ng-show="!isCompare()">
        <div>
          <label><input type="number" class="form-control" data-ng-model="ref.viewNumAngels" data-ng-blur="updateAngels()" step="0.001" required></input> <input type="text" class="form-control illions" data-ng-model="ref.illions" typeahead="ill for ill in illionsArray | filter:$viewValue | limitTo:8" placeholder="*illions" data-ng-blur="updateAngels()"></input> # Angels</label>
          <label class="checkbox"><input type="checkbox" class="form-control" data-ng-model="raw"></input> Raw Values</label>
        </div>
        <div>
          <table class="table table-striped table-hover table-bordered space_top">
            <thead>
              <tr>
                <th>Type</th>
                <th>Number</th>
                <th>$ / Cycle</th>
                <th>Cycle Time</th>
                <th>$ / Second</th>
                <th>% of total $ / Second</th>
              </tr>
            </thead>
            <tbody>
              <tr data-ng-repeat="inv in ref.investments track by $index">
                <td>{{inv[0]}}</td>
                <td><input type="number" class="form-control" data-ng-model="inv[1]"></input></td>
                <td>${{inv[2] | num:raw}}</td>
                <td>{{inv[3] | time:raw}}</td>
                <td>${{inv[4] | num:raw}}</td>
                <td>{{inv[5] | num:raw}}%</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div>
          <accordion close-others="false">
            <accordion-group is-open="accOpen[0]">
              <accordion-heading>
                Cost of Upgrades<span class="pull-right fa" ng-class="{'fa-chevron-down': accOpen[0], 'fa-chevron-right': !accOpen[0]}"></span>
              </accordion-heading>
              <table class="table table-striped table-hover table-bordered">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>$ Cost +1</th>
                    <th>Time Cost +1</th>
                    <th>$ Cost +10</th>
                    <th>Time Cost +10</th>
                    <th>$ Cost +bonus</th>
                    <th>Time Cost +bonus</th>
                    <th>$ Cost +all bonus</th>
                    <th>Time Cost +all bonus</th>
                  </tr>
                </thead>
                <tbody>
                  <tr data-ng-repeat="rUC in ref.upgradeCosts track by $index">
                    <td>{{ref.investments[$index][0]}}</td>
                    <td>${{rUC[0] | num:raw}}</td>
                    <td>{{rUC[1] | time:raw}}</td>
                    <td>${{rUC[2] | num:raw}}</td>
                    <td>{{rUC[3] | time:raw}}</td>
                    <td>${{rUC[4] | num:raw}}</td>
                    <td>{{rUC[5] | time:raw}}</td>
                    <td>${{rUC[6] | num:raw}}</td>
                    <td>{{rUC[7] | time:raw}}</td>
                  </tr>
                </tbody>
              </table>
            </accordion-group>
            <accordion-group is-open="accOpen[1]">
              <accordion-heading>
                Cash Upgrades<span class="pull-right fa" ng-class="{'fa-chevron-down': accOpen[1], 'fa-chevron-right': !accOpen[1]}"></span>
              </accordion-heading>
              <div class="well">
                <input type="checkbox" class="form-control col-xs-offset-3" data-ng-model="fillBefore[0]"> Buy all before (inclusive)</input>
                <input type="checkbox" class="form-control col-xs-offset-3" data-ng-model="clearAfter[0]"> Clear all after (inclusive)</input>
              </div>
              <div class="col-xs-4" data-ng-repeat="cupg in ref.cashUpgrades track by $index">
                <input type="checkbox" class="form-control" data-ng-model="cupg[2]" data-ng-change="checkCash(ref, $index)"> {{getNamedType(ref, cupg)}} (${{cupg[0] | num:raw}})</input>
              </div>
            </accordion-group>
            <accordion-group is-open="accOpen[2]">
              <accordion-heading>
                Angel Upgrades<i data-ng-show="ref.angelExclamation" class="fa fa-exclamation"></i><span class="pull-right fa" ng-class="{'fa-chevron-down': accOpen[2], 'fa-chevron-right': !accOpen[2]}"></span>
              </accordion-heading>
              <div class="well">
                <input type="checkbox" class="form-control col-xs-offset-3" data-ng-model="fillBefore[1]"> Buy all before (inclusive)</input>
                <input type="checkbox" class="form-control col-xs-offset-3" data-ng-model="clearAfter[1]"> Clear all after (inclusive)</input>
              </div>
              <div class="col-xs-4" data-ng-repeat="aupg in ref.angelUpgrades track by $index">
                <input type="checkbox" class="form-control" data-ng-model="aupg[3]" data-ng-change="checkAngel(ref, $index)"> {{getNamedType(ref, aupg)}} ({{aupg[0] | num:raw}} AI)<i data-ng-show="aupg[2]" class="fa fa-exclamation"></i></input>
              </div>
            </accordion-group>
            <accordion-group is-open="accOpen[3]">
              <accordion-heading>
                Managers<span class="pull-right fa" ng-class="{'fa-chevron-down': accOpen[3], 'fa-chevron-right': !accOpen[3]}"></span>
              </accordion-heading>
              <table class="table table-striped table-hover table-bordered">
                <thead>
                  <tr>
                    <th>Business</th>
                    <th data-ng-show="isEarth()">10% off</th>
                    <th data-ng-show="isEarth()">99.999% off</th>
                    <th data-ng-show="!isEarth()">25% off</th>
                  </tr>
                </thead>
                <tbody>
                  <tr data-ng-repeat="mupg in ref.managerUpgrades track by $index">
                    <td>{{ref.investments[$index][0]}}</td>
                    <td data-ng-repeat="mtup in mupg track by $index">
                      <input type="checkbox" data-ng-model="mtup[1]" data-ng-change="toggleManagers(mupg, $index)">{{$index == 1 ? ' $' : ' '}}{{mtup[0] | num:raw}}{{$index == 0 ? ' AI' : ''}}
                    </td>
                  </tr>
                </tbody>
              </table>
            </accordion-group>
          </accordion>
        </div>
        <h2>Total $ / second : {{ref.totalMoneyPerSecond | number}} ({{ref.totalMoneyPerSecond | num}})</h2>
        <h2>Total $ / minute : {{ref.totalMoneyPerSecond * 60 | number}} ({{ref.totalMoneyPerSecond * 60 | num}})</h2>
        <button type="button" class="btn btn-primary" data-ng-click="calc(ref)">Calculate</button>
        <div data-ng-show="ref.recTable.length">
          <h2>Recommendation: {{ref.recommendation}}</h2>
          <button type="button" class="btn btn-primary" data-ng-click="apply(ref)">Apply Recommendation</button>
          <label class="checkbox"><input type="checkbox" class="form-control" data-ng-model="raw"></input> Raw Values</label>
          <table class="table table-striped table-hover table-bordered space_top">
            <thead>
              <tr>
                <th>Upgrade</th>
                <th>To</th>
                <th class="clickable" data-ng-click="clickSort(ref, 2)">Upgrade Score (higher = better)*
                  <span data-ng-if="2 == sortIndex && reverse" class="pull-right fa fa-chevron-down"></span>
                  <span data-ng-if="2 == sortIndex && !reverse" class="pull-right fa fa-chevron-up"></span>
                </th>
                <th class="clickable" data-ng-click="clickSort(ref, 3)">Cost of Upgrade
                  <span data-ng-if="3 == sortIndex && reverse" class="pull-right fa fa-chevron-down"></span>
                  <span data-ng-if="3 == sortIndex && !reverse" class="pull-right fa fa-chevron-up"></span>
                </th>
                <th class="clickable" data-ng-click="clickSort(ref, 4)">Cost of Upgrade in Time
                  <span data-ng-if="4 == sortIndex && reverse" class="pull-right fa fa-chevron-down"></span>
                  <span data-ng-if="4 == sortIndex && !reverse" class="pull-right fa fa-chevron-up"></span>
                </th>
                <th class="clickable" data-ng-click="clickSort(ref, 5)">Increase in $ / Second
                  <span data-ng-if="5 == sortIndex && reverse" class="pull-right fa fa-chevron-down"></span>
                  <span data-ng-if="5 == sortIndex && !reverse" class="pull-right fa fa-chevron-up"></span>
                </th>
                <th class="clickable" data-ng-click="clickSort(ref, 6)">% Increase in $ / Second
                  <span data-ng-if="6 == sortIndex && reverse" class="pull-right fa fa-chevron-down"></span>
                  <span data-ng-if="6 == sortIndex && !reverse" class="pull-right fa fa-chevron-up"></span>
                </th>
                <th>Apply</th>
              </tr>
            </thead>
            <tbody>
              <tr data-ng-repeat="rec in ref.recTable track by $index" data-ng-hide="$last">
                <td>{{rec[0]}}</td>
                <td>{{rec[1] | num:raw}}</td>
                <td>{{rec[2] | num:raw}}</td>
                <td>${{rec[3] | num:raw}}</td>
                <td>{{rec[4] | time:raw}}</td>
                <td>${{rec[5] | num:raw}}</td>
                <td>{{rec[6] | num:raw}}%</td>
                <td><button type="button" class="btn btn-primary" data-ng-click="applyRow(ref, rec)">Apply this row</button></td>
              </tr>
            </tbody>
          </table>
        </div>
        <h3>* Upgrade Score is calculated as (Increase in $ / Second of upgrade) / (Cost in Time of upgrade)</h3>
      </div>
      <hr>
      <h4 class="pull-right">Found an error? Want to request a feature? You can do so on <a href="https://www.reddit.com/r/AdventureCapitalist/comments/3ik18l/another_calculator/">Reddit</a> or <a href="https://github.com/Slimmmo/Slimmmo.github.io">Github</a>.</h4>
    </div>
  </body>
 </html>